{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROGRAMING\\\\js_kursai\\\\REACT\\\\budget\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport { Link, useLoaderData } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport Intro from \"../components/Intro\";\nimport AddBudgetForm from \"../components/AddBudgetForm\";\nimport AddExpenseForm from \"../components/AddExpenseForm\";\nimport BudgetItem from \"../components/BudgetItem\";\nimport Table from \"../components/Table\";\nimport { createBudget, createExpense, deleteItem, fetchData, waait } from \"../helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function dashboardLoader() {\n  const userName = fetchData(\"userName\");\n  const budgets = fetchData(\"budgets\");\n  const expenses = fetchData(\"expenses\");\n  return {\n    userName,\n    budgets,\n    expenses\n  };\n}\nexport async function dashboardAction({\n  request\n}) {\n  await waait();\n  const data = await request.formData();\n  const {\n    _action,\n    ...values\n  } = Object.fromEntries(data);\n\n  // new user submission\n  if (_action === \"newUser\") {\n    try {\n      localStorage.setItem(\"userName\", JSON.stringify(values.userName));\n      return toast.success(`Welcome, ${values.userName}`);\n    } catch (e) {\n      throw new Error(\"There was a problem creating your account.\");\n    }\n  }\n  if (_action === \"createBudget\") {\n    try {\n      createBudget({\n        name: values.newBudget,\n        amount: values.newBudgetAmount\n      });\n      return toast.success(\"Budget created!\");\n    } catch (e) {\n      throw new Error(\"There was a problem creating your budget.\");\n    }\n  }\n  if (_action === \"createExpense\") {\n    try {\n      createExpense({\n        name: values.newExpense,\n        amount: values.newExpenseAmount,\n        budgetId: values.newExpenseBudget\n      });\n      return toast.success(`Expense ${values.newExpense} created!`);\n    } catch (e) {\n      throw new Error(\"There was a problem creating your expense.\");\n    }\n  }\n  if (_action === \"deleteExpense\") {\n    try {\n      deleteItem({\n        key: \"expenses\",\n        id: values.expenseId\n      });\n      return toast.success(\"Expense deleted!\");\n    } catch (e) {\n      throw new Error(\"There was a problem deleting your expense.\");\n    }\n  }\n}\nconst Dashboard = () => {\n  _s();\n  const {\n    userName,\n    budgets,\n    expenses\n  } = useLoaderData();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: userName ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome back, \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"accent\",\n          children: userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-sm\",\n        children: budgets && budgets.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-lg\",\n            children: [/*#__PURE__*/_jsxDEV(AddBudgetForm, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(AddExpenseForm, {\n              budgets: budgets\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Existing Budgets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"budgets\",\n            children: budgets.map(budget => /*#__PURE__*/_jsxDEV(BudgetItem, {\n              budget: budget\n            }, budget.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 27\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this), expenses && expenses.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Recent Expenses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              expenses: expenses.sort((a, b) => b.createdAt - a.createdAt).slice(0, 8)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }, this), expenses.length > 8 && /*#__PURE__*/_jsxDEV(Link, {\n              to: \"expenses\",\n              className: \"btn btn--dark\",\n              children: \"View all expenses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 19\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Personal budgeting is the secret to financial freedom.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Create a budget to get started!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(AddBudgetForm, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Intro, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n};\n_s(Dashboard, \"D12ahPY9QAP4fIQ0lQnlW5tTEfY=\", false, function () {\n  return [useLoaderData];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["Link","useLoaderData","toast","Intro","AddBudgetForm","AddExpenseForm","BudgetItem","Table","createBudget","createExpense","deleteItem","fetchData","waait","jsxDEV","_jsxDEV","Fragment","_Fragment","dashboardLoader","userName","budgets","expenses","dashboardAction","request","data","formData","_action","values","Object","fromEntries","localStorage","setItem","JSON","stringify","success","e","Error","name","newBudget","amount","newBudgetAmount","newExpense","newExpenseAmount","budgetId","newExpenseBudget","key","id","expenseId","Dashboard","_s","children","className","fileName","_jsxFileName","lineNumber","columnNumber","length","map","budget","sort","a","b","createdAt","slice","to","_c","$RefreshReg$"],"sources":["D:/PROGRAMING/js_kursai/REACT/budget/src/pages/Dashboard.js"],"sourcesContent":["import { Link, useLoaderData } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport Intro from \"../components/Intro\";\nimport AddBudgetForm from \"../components/AddBudgetForm\";\nimport AddExpenseForm from \"../components/AddExpenseForm\";\nimport BudgetItem from \"../components/BudgetItem\";\nimport Table from \"../components/Table\";\nimport { createBudget, createExpense, deleteItem, fetchData, waait } from \"../helpers\"\n\nexport function dashboardLoader() {\n    const userName = fetchData(\"userName\");\n    const budgets = fetchData(\"budgets\");\n    const expenses = fetchData(\"expenses\");\n    return { userName, budgets, expenses }\n}\n\nexport async function dashboardAction({ request }) {\n    await waait();\n    const data = await request.formData();\n    const { _action, ...values } = Object.fromEntries(data)\n  \n    // new user submission\n    if (_action === \"newUser\") {\n      try {\n        localStorage.setItem(\"userName\", JSON.stringify(values.userName))\n        return toast.success(`Welcome, ${values.userName}`)\n      } catch (e) {\n        throw new Error(\"There was a problem creating your account.\")\n      }\n    }\n  \n    if (_action === \"createBudget\") {\n      try {\n        createBudget({\n          name: values.newBudget,\n          amount: values.newBudgetAmount,\n        })\n        return toast.success(\"Budget created!\")\n      } catch (e) {\n        throw new Error(\"There was a problem creating your budget.\")\n      }\n    }\n    if (_action === \"createExpense\") {\n        try {\n          createExpense({\n            name: values.newExpense,\n            amount: values.newExpenseAmount,\n            budgetId: values.newExpenseBudget\n          })\n          return toast.success(`Expense ${values.newExpense} created!`)\n        } catch (e) {\n          throw new Error(\"There was a problem creating your expense.\")\n        }\n    }\n\n    if (_action === \"deleteExpense\") {\n        try {\n          deleteItem({\n            key: \"expenses\",\n            id: values.expenseId,\n          });\n          return toast.success(\"Expense deleted!\");\n        } catch (e) {\n          throw new Error(\"There was a problem deleting your expense.\");\n        }\n    }\n}\n\nconst Dashboard = () => {\n  const { userName, budgets, expenses } = useLoaderData()\n\n  return (\n    <>\n      {userName ? (\n        <div className=\"dashboard\">\n          <h1>Welcome back, <span className=\"accent\">{userName}</span></h1>\n          <div className=\"grid-sm\">\n          {\n              budgets && budgets.length > 0\n                ? (\n                  <div className=\"grid-lg\">\n                    <div className=\"flex-lg\">\n                      <AddBudgetForm />\n                      <AddExpenseForm budgets={budgets} />\n                    </div>\n                    <h2>Existing Budgets</h2>\n                    <div className=\"budgets\">\n                      {\n                        budgets.map((budget) => (\n                          <BudgetItem key={budget.id} budget={budget} />\n                        ))\n                      }\n                    </div>\n                    {expenses && expenses.length > 0 && (\n                        <div className=\"grid-md\">\n                            <h2>Recent Expenses</h2>\n                            <Table\n                            expenses={expenses\n                                .sort((a, b) => b.createdAt - a.createdAt)\n                                .slice(0, 8)}\n                            />\n                            {expenses.length > 8 && (\n                            <Link to=\"expenses\" className=\"btn btn--dark\">\n                                View all expenses\n                            </Link>\n                            )}\n                        </div>\n                    )}\n                  </div>\n                )\n                : (\n                  <div className=\"grid-sm\">\n                    <p>Personal budgeting is the secret to financial freedom.</p>\n                    <p>Create a budget to get started!</p>\n                    <AddBudgetForm />\n                  </div>\n                )\n            }\n          </div>\n        </div>\n      ) : <Intro />}\n    </>\n  )\n}\nexport default Dashboard\n\n"],"mappings":";;AAAA,SAASA,IAAI,EAAEC,aAAa,QAAQ,kBAAkB;AACtD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,cAAc,MAAM,8BAA8B;AACzD,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,KAAK,MAAM,qBAAqB;AACvC,SAASC,YAAY,EAAEC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,KAAK,QAAQ,YAAY;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEtF,OAAO,SAASC,eAAeA,CAAA,EAAG;EAC9B,MAAMC,QAAQ,GAAGP,SAAS,CAAC,UAAU,CAAC;EACtC,MAAMQ,OAAO,GAAGR,SAAS,CAAC,SAAS,CAAC;EACpC,MAAMS,QAAQ,GAAGT,SAAS,CAAC,UAAU,CAAC;EACtC,OAAO;IAAEO,QAAQ;IAAEC,OAAO;IAAEC;EAAS,CAAC;AAC1C;AAEA,OAAO,eAAeC,eAAeA,CAAC;EAAEC;AAAQ,CAAC,EAAE;EAC/C,MAAMV,KAAK,CAAC,CAAC;EACb,MAAMW,IAAI,GAAG,MAAMD,OAAO,CAACE,QAAQ,CAAC,CAAC;EACrC,MAAM;IAAEC,OAAO;IAAE,GAAGC;EAAO,CAAC,GAAGC,MAAM,CAACC,WAAW,CAACL,IAAI,CAAC;;EAEvD;EACA,IAAIE,OAAO,KAAK,SAAS,EAAE;IACzB,IAAI;MACFI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACN,MAAM,CAACR,QAAQ,CAAC,CAAC;MACjE,OAAOhB,KAAK,CAAC+B,OAAO,CAAE,YAAWP,MAAM,CAACR,QAAS,EAAC,CAAC;IACrD,CAAC,CAAC,OAAOgB,CAAC,EAAE;MACV,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;IAC/D;EACF;EAEA,IAAIV,OAAO,KAAK,cAAc,EAAE;IAC9B,IAAI;MACFjB,YAAY,CAAC;QACX4B,IAAI,EAAEV,MAAM,CAACW,SAAS;QACtBC,MAAM,EAAEZ,MAAM,CAACa;MACjB,CAAC,CAAC;MACF,OAAOrC,KAAK,CAAC+B,OAAO,CAAC,iBAAiB,CAAC;IACzC,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,MAAM,IAAIC,KAAK,CAAC,2CAA2C,CAAC;IAC9D;EACF;EACA,IAAIV,OAAO,KAAK,eAAe,EAAE;IAC7B,IAAI;MACFhB,aAAa,CAAC;QACZ2B,IAAI,EAAEV,MAAM,CAACc,UAAU;QACvBF,MAAM,EAAEZ,MAAM,CAACe,gBAAgB;QAC/BC,QAAQ,EAAEhB,MAAM,CAACiB;MACnB,CAAC,CAAC;MACF,OAAOzC,KAAK,CAAC+B,OAAO,CAAE,WAAUP,MAAM,CAACc,UAAW,WAAU,CAAC;IAC/D,CAAC,CAAC,OAAON,CAAC,EAAE;MACV,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;IAC/D;EACJ;EAEA,IAAIV,OAAO,KAAK,eAAe,EAAE;IAC7B,IAAI;MACFf,UAAU,CAAC;QACTkC,GAAG,EAAE,UAAU;QACfC,EAAE,EAAEnB,MAAM,CAACoB;MACb,CAAC,CAAC;MACF,OAAO5C,KAAK,CAAC+B,OAAO,CAAC,kBAAkB,CAAC;IAC1C,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;IAC/D;EACJ;AACJ;AAEA,MAAMY,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM;IAAE9B,QAAQ;IAAEC,OAAO;IAAEC;EAAS,CAAC,GAAGnB,aAAa,CAAC,CAAC;EAEvD,oBACEa,OAAA,CAAAE,SAAA;IAAAiC,QAAA,EACG/B,QAAQ,gBACPJ,OAAA;MAAKoC,SAAS,EAAC,WAAW;MAAAD,QAAA,gBACxBnC,OAAA;QAAAmC,QAAA,GAAI,gBAAc,eAAAnC,OAAA;UAAMoC,SAAS,EAAC,QAAQ;UAAAD,QAAA,EAAE/B;QAAQ;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACjExC,OAAA;QAAKoC,SAAS,EAAC,SAAS;QAAAD,QAAA,EAEpB9B,OAAO,IAAIA,OAAO,CAACoC,MAAM,GAAG,CAAC,gBAEzBzC,OAAA;UAAKoC,SAAS,EAAC,SAAS;UAAAD,QAAA,gBACtBnC,OAAA;YAAKoC,SAAS,EAAC,SAAS;YAAAD,QAAA,gBACtBnC,OAAA,CAACV,aAAa;cAAA+C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACjBxC,OAAA,CAACT,cAAc;cAACc,OAAO,EAAEA;YAAQ;cAAAgC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjC,CAAC,eACNxC,OAAA;YAAAmC,QAAA,EAAI;UAAgB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACzBxC,OAAA;YAAKoC,SAAS,EAAC,SAAS;YAAAD,QAAA,EAEpB9B,OAAO,CAACqC,GAAG,CAAEC,MAAM,iBACjB3C,OAAA,CAACR,UAAU;cAAiBmD,MAAM,EAAEA;YAAO,GAA1BA,MAAM,CAACZ,EAAE;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAmB,CAC9C;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAED,CAAC,EACLlC,QAAQ,IAAIA,QAAQ,CAACmC,MAAM,GAAG,CAAC,iBAC5BzC,OAAA;YAAKoC,SAAS,EAAC,SAAS;YAAAD,QAAA,gBACpBnC,OAAA;cAAAmC,QAAA,EAAI;YAAe;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACxBxC,OAAA,CAACP,KAAK;cACNa,QAAQ,EAAEA,QAAQ,CACbsC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,SAAS,GAAGF,CAAC,CAACE,SAAS,CAAC,CACzCC,KAAK,CAAC,CAAC,EAAE,CAAC;YAAE;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB,CAAC,EACDlC,QAAQ,CAACmC,MAAM,GAAG,CAAC,iBACpBzC,OAAA,CAACd,IAAI;cAAC+D,EAAE,EAAC,UAAU;cAACb,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAC;YAE9C;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CACL;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAGNxC,OAAA;UAAKoC,SAAS,EAAC,SAAS;UAAAD,QAAA,gBACtBnC,OAAA;YAAAmC,QAAA,EAAG;UAAsD;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC7DxC,OAAA;YAAAmC,QAAA,EAAG;UAA+B;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACtCxC,OAAA,CAACV,aAAa;YAAA+C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACd;MACN;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,gBACJxC,OAAA,CAACX,KAAK;MAAAgD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC,gBACb,CAAC;AAEP,CAAC;AAAAN,EAAA,CAvDKD,SAAS;EAAA,QAC2B9C,aAAa;AAAA;AAAA+D,EAAA,GADjDjB,SAAS;AAwDf,eAAeA,SAAS;AAAA,IAAAiB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}