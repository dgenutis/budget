{"ast":null,"code":"import{Link,useLoaderData}from\"react-router-dom\";import{toast}from\"react-toastify\";import Intro from\"../components/Intro\";import AddBudgetForm from\"../components/AddBudgetForm\";import AddExpenseForm from\"../components/AddExpenseForm\";import BudgetItem from\"../components/BudgetItem\";import Table from\"../components/Table\";import{createBudget,createExpense,deleteItem,fetchData,waait}from\"../helpers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function dashboardLoader(){const userName=fetchData(\"userName\");const budgets=fetchData(\"budgets\");const expenses=fetchData(\"expenses\");return{userName,budgets,expenses};}export async function dashboardAction(_ref){let{request}=_ref;await waait();const data=await request.formData();const{_action,...values}=Object.fromEntries(data);// new user submission\nif(_action===\"newUser\"){try{localStorage.setItem(\"userName\",JSON.stringify(values.userName));return toast.success(\"Welcome, \".concat(values.userName));}catch(e){throw new Error(\"There was a problem creating your account.\");}}if(_action===\"createBudget\"){try{createBudget({name:values.newBudget,amount:values.newBudgetAmount});return toast.success(\"Budget created!\");}catch(e){throw new Error(\"There was a problem creating your budget.\");}}if(_action===\"createExpense\"){try{createExpense({name:values.newExpense,amount:values.newExpenseAmount,budgetId:values.newExpenseBudget});return toast.success(\"Expense \".concat(values.newExpense,\" created!\"));}catch(e){throw new Error(\"There was a problem creating your expense.\");}}if(_action===\"deleteExpense\"){try{deleteItem({key:\"expenses\",id:values.expenseId});return toast.success(\"Expense deleted!\");}catch(e){throw new Error(\"There was a problem deleting your expense.\");}}}const Dashboard=()=>{const{userName,budgets,expenses}=useLoaderData();return/*#__PURE__*/_jsx(_Fragment,{children:userName?/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome back, \",/*#__PURE__*/_jsx(\"span\",{className:\"accent\",children:userName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid-sm\",children:budgets&&budgets.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"grid-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-lg\",children:[/*#__PURE__*/_jsx(AddBudgetForm,{}),/*#__PURE__*/_jsx(AddExpenseForm,{budgets:budgets})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Existing Budgets\"}),/*#__PURE__*/_jsx(\"div\",{className:\"budgets\",children:budgets.map(budget=>/*#__PURE__*/_jsx(BudgetItem,{budget:budget},budget.id))}),expenses&&expenses.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid-md\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Expenses\"}),/*#__PURE__*/_jsx(Table,{expenses:expenses.sort((a,b)=>b.createdAt-a.createdAt).slice(0,8)}),expenses.length>8&&/*#__PURE__*/_jsx(Link,{to:\"expenses\",className:\"btn btn--dark\",children:\"View all expenses\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid-sm\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Personal budgeting is the secret to financial freedom.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Create a budget to get started!\"}),/*#__PURE__*/_jsx(AddBudgetForm,{})]})})]}):/*#__PURE__*/_jsx(Intro,{})});};export default Dashboard;","map":{"version":3,"names":["Link","useLoaderData","toast","Intro","AddBudgetForm","AddExpenseForm","BudgetItem","Table","createBudget","createExpense","deleteItem","fetchData","waait","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","dashboardLoader","userName","budgets","expenses","dashboardAction","_ref","request","data","formData","_action","values","Object","fromEntries","localStorage","setItem","JSON","stringify","success","concat","e","Error","name","newBudget","amount","newBudgetAmount","newExpense","newExpenseAmount","budgetId","newExpenseBudget","key","id","expenseId","Dashboard","children","className","length","map","budget","sort","a","b","createdAt","slice","to"],"sources":["D:/PROGRAMING/js_kursai/REACT/budget/src/pages/Dashboard.js"],"sourcesContent":["import { Link, useLoaderData } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport Intro from \"../components/Intro\";\nimport AddBudgetForm from \"../components/AddBudgetForm\";\nimport AddExpenseForm from \"../components/AddExpenseForm\";\nimport BudgetItem from \"../components/BudgetItem\";\nimport Table from \"../components/Table\";\nimport { createBudget, createExpense, deleteItem, fetchData, waait } from \"../helpers\"\n\nexport function dashboardLoader() {\n    const userName = fetchData(\"userName\");\n    const budgets = fetchData(\"budgets\");\n    const expenses = fetchData(\"expenses\");\n    return { userName, budgets, expenses }\n}\n\nexport async function dashboardAction({ request }) {\n    await waait();\n    const data = await request.formData();\n    const { _action, ...values } = Object.fromEntries(data)\n  \n    // new user submission\n    if (_action === \"newUser\") {\n      try {\n        localStorage.setItem(\"userName\", JSON.stringify(values.userName))\n        return toast.success(`Welcome, ${values.userName}`)\n      } catch (e) {\n        throw new Error(\"There was a problem creating your account.\")\n      }\n    }\n  \n    if (_action === \"createBudget\") {\n      try {\n        createBudget({\n          name: values.newBudget,\n          amount: values.newBudgetAmount,\n        })\n        return toast.success(\"Budget created!\")\n      } catch (e) {\n        throw new Error(\"There was a problem creating your budget.\")\n      }\n    }\n    if (_action === \"createExpense\") {\n        try {\n          createExpense({\n            name: values.newExpense,\n            amount: values.newExpenseAmount,\n            budgetId: values.newExpenseBudget\n          })\n          return toast.success(`Expense ${values.newExpense} created!`)\n        } catch (e) {\n          throw new Error(\"There was a problem creating your expense.\")\n        }\n    }\n\n    if (_action === \"deleteExpense\") {\n        try {\n          deleteItem({\n            key: \"expenses\",\n            id: values.expenseId,\n          });\n          return toast.success(\"Expense deleted!\");\n        } catch (e) {\n          throw new Error(\"There was a problem deleting your expense.\");\n        }\n    }\n}\n\nconst Dashboard = () => {\n  const { userName, budgets, expenses } = useLoaderData()\n\n  return (\n    <>\n      {userName ? (\n        <div className=\"dashboard\">\n          <h1>Welcome back, <span className=\"accent\">{userName}</span></h1>\n          <div className=\"grid-sm\">\n          {\n              budgets && budgets.length > 0\n                ? (\n                  <div className=\"grid-lg\">\n                    <div className=\"flex-lg\">\n                      <AddBudgetForm />\n                      <AddExpenseForm budgets={budgets} />\n                    </div>\n                    <h2>Existing Budgets</h2>\n                    <div className=\"budgets\">\n                      {\n                        budgets.map((budget) => (\n                          <BudgetItem key={budget.id} budget={budget} />\n                        ))\n                      }\n                    </div>\n                    {expenses && expenses.length > 0 && (\n                        <div className=\"grid-md\">\n                            <h2>Recent Expenses</h2>\n                            <Table\n                            expenses={expenses\n                                .sort((a, b) => b.createdAt - a.createdAt)\n                                .slice(0, 8)}\n                            />\n                            {expenses.length > 8 && (\n                            <Link to=\"expenses\" className=\"btn btn--dark\">\n                                View all expenses\n                            </Link>\n                            )}\n                        </div>\n                    )}\n                  </div>\n                )\n                : (\n                  <div className=\"grid-sm\">\n                    <p>Personal budgeting is the secret to financial freedom.</p>\n                    <p>Create a budget to get started!</p>\n                    <AddBudgetForm />\n                  </div>\n                )\n            }\n          </div>\n        </div>\n      ) : <Intro />}\n    </>\n  )\n}\nexport default Dashboard\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}